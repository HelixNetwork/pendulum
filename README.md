[![Build Status](https://travis-ci.com/HelixNetwork/sbx.svg?token=uwTGeqrvzM3QBFSrvQb6&branch=master)](https://travis-ci.com/HelixNetwork/sbx)
![GitHub release](https://img.shields.io/github/release/helixnetwork/sbx.svg)
[![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

# SBX
Helix Sandbox (SBX) - based on [**IRI**](https://github.com/iotaledger/iri/).
* **Latest release:** 0.4.0 Release
* **License:** GPLv3

## Developers

- Please see the [CONTRIBUTING.md](https://github.com/HelixNetwork/testnet-1.0/CONTRIBUTING.md) if you wish to contribute to this repository!

- You may enable auto-submission of milestones by passing the `-m`-flag and an integer for the delay.
- Testnet Balance:
```
Seed#1: 953c8169027a85415692cc05bd3a91f95c3be8e5c93c1d2b2e2c447b5ed082d2
Addr#1: e8beb08da8930027eacd19f806a417ff919bafcc216d9e9483398368be3921ea

Seed#2: 4ee945095f96b31ff8c5a7ac5f20140d5ab235689b9dc3ad28a46842848b3f29
Addr#2: 064c7c7652a56055c3af2c620ee3a9daf4be3ad6cebaa8d5dd9ed8a8d7509ea1

Seed#3: 4114c4160a9c08af06a72cec16dd4f54404a1e32011139b5855363594766c2f1
Addr#3: 16e092b38442a4887f510e15e58cefe024f212470df123a070c4db2f5ef4c6de

Seed#4: 47fb9954653fb0f5487fd8fb37332bf794a9e56fae4ff67c3f06d59c86616534
Addr#4: ff400e408abd50dd3ccb71de11f670c9ec72dece33718f407a187de67b6f6ce0
```
These addresses hold value, you may use the corresponding seeds to issue value-transfers.

## Installing   
Make sure you have [**Maven**](https://maven.apache.org/) and [**Java 8**](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) installed on your computer.

### Download
```
$ git clone https://github.com/HelixNetwork/sbx.git
```
### Compile
```
$ cd sbx
$ mvn clean compile
$ mvn package
```

This will create a `target` directory in which you will find the executable jar file that you can use for the

### Launch

```
java -jar target/sbx-<VERSION>.jar -p 14700
```

With auto-milestone submission:
```
java -jar target/sbx-<VERSION>.jar -p 14700 -m 30
```
**NOTICE**: The `-m` flag is only temporary and will be removed in future updates. Its current purpose is to ease the process of submitting milestones as a developer. spment purposes
If you are running a node with the milestone flag, you should consider limiting the api.

## CLI

Option | Shortened version | Description | Example Input
--- | --- | --- | ---
`--port` | `-p` | This is a *mandatory* option that defines the port to be used to send API commands to your node | `-p 14800`
`--neighbors` | `-n` | Neighbors that you are connected with will be added via this option. | `-n "udp://148.148.148.148:14700 udp://[2001:db8:a0b:12f0::1]:14700"`
`--config` | `-c` | Config INI file that can be used instead of CLI options. See more below | `-c sbx.ini`
`--udp-receiver-port` | `-u` | UDP receiver port | `-u 14800`
`--tcp-receiver-port` | `-t` | TCP receiver port | `-t 14800`
`--ms-delay`| `-m` | Sets delay for auto-milestones. | `-m 60`
`--testnet` | | Makes it possible to run HCP with the HELIX testnet | `--testnet`
`--remote` | | Remotely access your node and send API commands | `--remote`
`--remote-auth` | | Require authentication password for accessing remotely. Requires a correct `username:hashedpassword` combination | `--remote-auth helixtoken:LL9EZFNCHZCMLJLVUBCKJSWKFEXNYRHHMYS9XQLUZRDEKUUDOCMBMRBWJEMEDDXSDPHIGQULENCRVEYMO`
`--remote-limit-api` | | Exclude certain API calls from being able to be accessed remotely | `--remote-limit-api "attachToTangle, addNeighbors"`
`--send-limit`| | Limit the outbound bandwidth consumption. Limit is set to mbit/s | `--send-limit 1.0`
`--max-peers` | | Limit the number of max accepted peers. Default is set to 0 (mutual tethering) | `--max-peers 8`
`--dns-resolution-false` | | Ignores DNS resolution refreshing  | `-dns-resolution-false`
## INI

You can also provide an ini file to store all of your command line options and easily update (especially neighbors) if needed. You can enable it via the `--config` flag. Here is an example INI file:
```
[SBX]
PORT = 14700
UDP_RECEIVER_PORT = 14700
NEIGHBORS = udp://my.favorite.com:15600
HXI_DIR = hxi
HEADLESS = true
DEBUG = true
DB_PATH = db
ZMQ_ENABLED = true
MS_DELAY = 30
```

## API
The [**Helix Library**](https://github.com/helixnetwork/helix.api) wraps the primitive api commands, whilst providing the mandatory cryptography to locally sign a transaction and typically do proof of work.
As the latest build is still being tested, you can preliminarily send http requests using [cURL]().  
### getNodeInfo
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getNodeInfo"}'
```

**Response**
```
{
  "appName":"SBX",
  "appVersion":"0.3.4",
  "jreAvailableProcessors":8,
  "jreFreeMemory":231182400,
  "jreVersion":"1.8.0_171",
  "jreMaxMemory":3817865216,
  "jreTotalMemory":257425408,
  "latestMilestone":"0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343",
  "latestMilestoneIndex":6,
  "latestSolidSubtangleMilestone":"0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343",
  "latestSolidSubtangleMilestoneIndex":6,
  "milestoneStartIndex":0,
  "neighbors":0,
  "packetsQueueSize":0,
  "time":1543586964422,
  "tips":0,
  "transactionsToRequest":0,
  "features":["snapshotPruning","dnsRefresher"],
  "coordinatorAddress":"a3fcb75bbfc68db05a5207c2afc97fc496ec86e7ecdd6a933be4d1bad8f74c34",
  "duration":9
}
```

### getNeighbors
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getNeighbors"}'
```
**Response**
```
{
  "neighbors":[],
  "duration":0
}
```
### addNeighbors
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "addNeighbors", "uris": ["udp://8.8.8.8:14700", "udp://8.8.8.5:14700"]}'
```
**Response**
```
{
  "addedNeighbors": 0,
  "duration": 2
}
```
### removeNeighbors
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "removeNeighbors", "uris": ["udp://8.8.8.8:14700", "udp://8.8.8.5:14700"]}'
```
**Response**
```
{
  "removedNeighbors": 0,
  "duration": 2
}
```
### getTips
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getTips"}'
```
**Response**
```
{
  "hashes":["0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343", "000006ce531ddf7d7bea39274dac4ba7ee1402ffad754cc68471fc59f9a114aab91174116de83fe0919382c1e587284028da9d7774246cf728de44284c65a6b3"],
  "duration":2
}
```
### findTransactions
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "findTransactions", "addresses": ["a3fcb75bbfc68db05a5207c2afc97fc496ec86e7ecdd6a933be4d1bad8f74c34"]}'
```
**Response**
```
{
 "hashes":["00006c409915cfd8c16b5f9be2f9108966716f7bf5ea64794f92e7ad9d4b0ac8",
           "0000850174174f28682c09835bd2ae5f18157340a6740c35203361c21eaf81b0",
           "00001a8e1d781318c196df2843d32d5ea2674806c92a26faabe6d1e277fdb143",
           "0000883463bdfba5795ece73d200fa95a7617ff61e43f058297380f8e373dbaa",
           "0000809b36c217e3d00ceffe97302157a885ed28b1a4bc66edd28fdce13004c8",
           "0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343"],
 "duration":13
}
```
### getHBytes
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getHBytes", "hashes": ["0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343"]}'
```
**Response**
```
{
 "hbytes":["0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a3fcb75bbfc68db05a5207c2afc97fc496ec86e7ecdd6a933be4d1bad8f74c34000000000000000000000000000000000000000000000000000000000000000000000000000000000000016764f23c2900000000000000000000000000000000051323892969e8e6d9ee971a79133e3691e1fcee6e133e07e3a87508755f44d30000883463bdfba5795ece73d200fa95a7617ff61e43f058297380f8e373dbaa0000883463bdfba5795ece73d200fa95a7617ff61e43f058297380f8e373dbaa00000000000000060000016764f23c2a0000000000000000000000000000007f94a99460b908004d000000000000000000000000000000000000000000000000"],
 "duration":0
}

```
### getInclusionStates
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getInclusionStates", "transactions": ["00001a8e1d781318c196df2843d32d5ea2674806c92a26faabe6d1e277fdb143"], "tips": ["00006c409915cfd8c16b5f9be2f9108966716f7bf5ea64794f92e7ad9d4b0ac8"]}'
```
**Response**
```
{
 "states":[false],"duration":2
}
```
### getBalances
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getBalances", "addresses": ["d0e7e549a4ffe5b4f8343973f0237db9ede3597baced22715c22dcd8c76ae738"], "threshold": 100}'
```
**Response**
```
{
  "balances":["536561674354688"],
  "references":["0000cfddd53dc766df017ebbf6691c4b618e86832f2a97e9c59cf1176ffaeef0"],
  "milestoneIndex":2,
  "duration":20
}
```
### getTransactionsToApprove
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "getTransactionsToApprove", "depth": 15, "reference": "0000850174174f28682c09835bd2ae5f18157340a6740c35203361c21eaf81b0"}'
```
**Response**
```
{
 "trunkTransaction":"0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343",
 "branchTransaction":"0000cfddd53dc766df017ebbf6691c4b618e86832f2a97e9c59cf1176ffaeef0",
 "duration":5
}
```
### attachToTangle
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "attachToTangle", "trunkTransaction": "0000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad343", "branchTransaction": "0000850174174f28682c09835bd2ae5f18157340a6740c35203361c21eaf81b0", "minWeightMagnitude": 2, "hbytes": ["0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bdd83fd000000000000000100000000000000027aeb69d7e585744a473e82a61fe6fab06b130757ccd329409f56aff1449e1f8400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000feff0036003600360000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"]}'
```
**Response**
```
{
 "hbytes":["0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bdd83fd000000000000000100000000000000027aeb69d7e585744a473e82a61fe6fab06b130757ccd329409f56aff1449e1f840000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad3430000850174174f28682c09835bd2ae5f18157340a6740c35203361c21eaf81b0feff0036003600360000016765232f7f0000000000000000000000000000007faad370633bb3186e000000000000000000000000000000000000000000000000"],
 "duration":1388
}
```
### interruptAttachingToTangle
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "interruptAttachingToTangle"}'
```
**Response**
```
{
 "duration":1
}
```
### broadcastTransactions
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "broadcastTransactions", "hbytes": ["0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bdd83fd000000000000000100000000000000027aeb69d7e585744a473e82a61fe6fab06b130757ccd329409f56aff1449e1f840000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad3430000850174174f28682c09835bd2ae5f18157340a6740c35203361c21eaf81b0feff0036003600360000016765232f7f0000000000000000000000000000007faad370633bb3186e000000000000000000000000000000000000000000000000"]}'
```
**Response**
```
{
 "duration":1005
}
```
### storeTransactions
**Command**
```
curl http://localhost:14700 \
  -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-HELIX-API-Version: 1' \
  -d '{"command": "storeTransactions", "hbytes": ["0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005bdd83fd000000000000000100000000000000027aeb69d7e585744a473e82a61fe6fab06b130757ccd329409f56aff1449e1f840000f13be306d278fae139dc4a54deb40389a8d1c3677a872a9a198f57aad3430000850174174f28682c09835bd2ae5f18157340a6740c35203361c21eaf81b0feff0036003600360000016765232f7f0000000000000000000000000000007faad370633bb3186e000000000000000000000000000000000000000000000000"]}'
```
**Response**
```
{
 "duration":1017
 }
```
